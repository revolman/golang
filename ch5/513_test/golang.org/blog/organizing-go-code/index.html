
<!DOCTYPE html>
<html lang="en">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-11222381-3"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag("js", new Date());
gtag("config", "UA-11222381-3");
gtag("config", "UA-49880327-6");
</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#00ADD8">
<meta name="description" content="Go is an open source programming language that makes it easy to build simple, reliable, and efficient software.">
<title>Organizing Go code - The Go Blog</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:600|Roboto:400,700|Source+Code+Pro">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Product+Sans&text=Supported%20by%20Google&display=swap">
<link rel="stylesheet" href="/lib/godoc/style.css">
<link rel="stylesheet" href="/fonts.css">
<link rel="alternate" type="application/atom+xml" title="blog.golang.org - Atom Feed" href="https://blog.golang.org/feed.atom" />
<script>window.initFuncs = [];</script>
<style>
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: 'Work Sans', sans-serif;
    font-weight: 600;
  }
  h2 {  
    background: none;
    clear: none;
    font-size: 1.5em;
    font-weight: 600;
    line-height: inherit;
    overflow-wrap: normal;
    padding: 0;
  }
  @media print {
    #sidebar { display: none; }
  }
  #sidebar {
    float: right;
    padding-left: 20px;
    width: 40%;
    max-width: 250px;
    background: #f8f9f9;
    margin: 20px 0 20px 20px;
  }
  #sidebar h2 {
    font-size: 1rem;
  }
  #sidebar ul {
    padding: 0;
  }
  #sidebar li {
    list-style-type: none;
  }
  #content .author {
    font-style: italic;
  }
  #content .article {
    margin-bottom: 50px;
  }
  #content .date {
    color: #6e7072;
  }
  #content .tags {
    color: #999;
    font-size: smaller;
  }
  #content .iframe, #content .image {
    margin: 20px;
  }
  #content .title {
    margin: 20px 0;
  }
  #content img {
    max-width: 100%;
  }
  .article[data-slug='/go-fonts'] {
    font-family: Go, sans-serif;
  }
  .article[data-slug='/go-fonts'] pre,
  .article[data-slug='/go-fonts'] code {
    font-family: 'Go Mono', monospace;
  }
</style>
<body class="Site">
  <header class="Header js-header">
    <nav class="Header-nav">
      <a href="https://golang.org"><img class="Header-logo" src="/lib/godoc/images/go-logo-blue.svg" alt="Go"></a>
      <button class="Header-menuButton js-headerMenuButton" aria-label="Main menu" aria-expanded="false">
        <div class="Header-menuButtonInner">
      </button>
      <ul class="Header-menu">
        <li class="Header-menuItem"><a href="https://golang.org/doc/">Documents</a></li>
        <li class="Header-menuItem"><a href="https://golang.org/pkg/">Packages</a></li>
        <li class="Header-menuItem"><a href="https://golang.org/project/">The Project</a></li>
        <li class="Header-menuItem"><a href="https://golang.org/help/">Help</a></li>
        <li class="Header-menuItem"><a href="/">Blog</a></li>
        <li class="Header-menuItem"><a href="https://play.golang.org/">Play</a></li>
        <li class="Header-menuItem Header-menuItem--search">
          <form class="HeaderSearch" role="search" action="https://golang.org/search">
            <input class="HeaderSearch-input"
                  type="search"
                  name="q"
                  placeholder="Search"
                  aria-label="Search"
                  autocapitalize="off"
                  autocomplete="off"
                  autocorrect="off"
                  spellcheck="false"
                  required>
            <button class="HeaderSearch-submit" aria-label="Search">
              <svg class="HeaderSearch-icon" width="24" height="24" viewBox="0 0 24 24"><title>Search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
            </button>
          </form>
        </li>
      </ul>
    </nav>
  </header>

  <main class="Site-content" id="page">
    <div class="container">
      <aside id="sidebar">
        
          
            <h2>Next article</h2>
            <p><a href="/appengine-171">Go updates in App Engine 1.7.1</a></p>
          

          
            <h2>Previous article</h2>
            <p><a href="/gccgo-in-gcc-471">Gccgo in GCC 4.7.1</a></p>
          
        

        <h2>Links</h2>
        <ul>
          <li><a href='//golang.org/'>golang.org</a></li>
          <li><a href='//golang.org/doc/install.html'>Install Go</a></li>
          <li><a href='//tour.golang.org/'>A Tour of Go</a></li>
          <li><a href='//golang.org/doc/'>Go Documentation</a></li>
          <li><a href='//groups.google.com/group/golang-nuts'>Go Mailing List</a></li>
          <li><a href='//twitter.com/golang'>Go on Twitter</a></li>
        </ul>

        <p><a href="/index">Blog index</a></p>
      </aside>

      <div id="content">
        <h1><a href="/">The Go Blog</a></h1>
        
	
  <div class="article" data-slug="/organizing-go-code">
    <h2 class="title"><a href="/organizing-go-code">Organizing Go code</a></h2>
    <p class="author">
    Andrew Gerrand<br>
    16 August 2012
    </p>
    
  
  
    
      
  <h4 id="TOC_1.">Introduction</h4>
  <p>Go code is organized differently to that of other languages.
This post discusses how to name and package the elements of your Go program
to best serve its users.</p>


    
      
  <h4 id="TOC_2.">Choose good names</h4>
  <p>The names you choose affect how you think about your code,
so take care when naming your package and its exported identifiers.</p>
<p>A package's name provides context for its contents.
For instance, the <a href="https://golang.org/pkg/bytes/" target="_blank" rel="noopener">bytes package</a> from
the standard library exports the <code>Buffer</code> type.
On its own, the name <code>Buffer</code> isn't very descriptive,
but when combined with its package name its meaning becomes clear: <code>bytes.Buffer</code>.
If the package had a less descriptive name,
like <code>util</code>, the buffer would likely acquire the longer and clumsier name <code>util.BytesBuffer</code>.</p>
<p>Don't be shy about renaming things as you work.
As you spend time with your program you will better understand how its pieces fit together and,
therefore, what their names should be.
There's no need to lock yourself into early decisions.
(The <a href="https://golang.org/cmd/gofmt/" target="_blank" rel="noopener">gofmt command</a> has a <code>-r</code> flag that
provides a syntax-aware search and replace,
making large-scale refactoring easier.)</p>
<p>A good name is the most important part of a software interface:
the name is the first thing every client of the code will see.
A well-chosen name is therefore the starting point for good documentation.
Many of the following practices result organically from good naming.</p>


    
      
  <h4 id="TOC_3.">Choose a good import path (make your package &#34;go get&#34;-able)</h4>
  <p>An import path is the string with which users import a package.
It specifies the directory (relative to <code>$GOROOT/src/pkg</code> or <code>$GOPATH/src</code>)
in which the package's source code resides.</p>
<p>Import paths should be globally unique, so use the path of your source repository as its base.
For instance, the <code>websocket</code> package from the <code>go.net</code> sub-repository has
an import path of <code>&quot;golang.org/x/net/websocket&quot;</code>.
The Go project owns the path <code>&quot;github.com/golang&quot;</code>,
so that path cannot be used by another author for a different package.
Because the repository URL and import path are one and the same,
the <code>go get</code> command can fetch and install the package automatically.</p>
<p>If you don't use a hosted source repository,
choose some unique prefix such as a domain,
company, or project name.
As an example, the import path of all Google's internal Go code starts with
the string <code>&quot;google&quot;</code>.</p>
<p>The last element of the import path is typically the same as the package name.
For instance, the import path <code>&quot;net/http&quot;</code> contains package <code>http</code>.
This is not a requirement - you can make them different if you like - but
you should follow the convention for predictability's sake:
a user might be surprised that import <code>&quot;foo/bar&quot;</code> introduces the identifier
<code>quux</code> into the package name space.</p>
<p>Sometimes people set <code>GOPATH</code> to the root of their source repository and
put their packages in directories relative to the repository root,
such as <code>&quot;src/my/package&quot;</code>.
On one hand, this keeps the import paths short (<code>&quot;my/package&quot;</code> instead of
<code>&quot;github.com/me/project/my/package&quot;</code>),
but on the other it breaks <code>go get</code> and forces users to re-set their <code>GOPATH</code>
to use the package. Don't do this.</p>


    
      
  <h4 id="TOC_4.">Minimize the exported interface</h4>
  <p>Your code is likely composed of many small pieces of useful code,
and so it is tempting to expose much of that functionality in your package's
exported interface. Resist that urge!</p>
<p>The larger the interface you provide, the more you must support.
Users will quickly come to depend on every type,
function, variable, and constant you export,
creating an implicit contract that you must honor in perpetuity or risk
breaking your users' programs.
In preparing Go 1 we carefully reviewed the standard library's exported
interfaces and removed the parts we weren't ready to commit to.
You should take similar care when distributing your own libraries.</p>
<p>If in doubt, leave it out!</p>


    
      
  <h4 id="TOC_5.">What to put into a package</h4>
  <p>It is easy to just throw everything into a &quot;grab bag&quot; package,
but this dilutes the meaning of the package name (as it must encompass a
lot of functionality) and forces the users of small parts of the package
to compile and link a lot of unrelated code.</p>
<p>On the other hand, it is also easy to go overboard in splitting your code
into small packages,
in which case you will likely becomes bogged down in interface design,
rather than just getting the job done.</p>
<p>Look to the Go standard libraries as a guide.
Some of its packages are large and some are small.
For instance, the <a href="https://golang.org/pkg/net/http/" target="_blank" rel="noopener">http package</a> comprises
17 go source files (excluding tests) and exports 109 identifiers,
and the <a href="https://golang.org/pkg/hash/" target="_blank" rel="noopener">hash package</a> consists of one file
that exports just three declarations.
There is no hard and fast rule; both approaches are appropriate given their context.</p>
<p>With that said, package main is often larger than other packages.
Complex commands contain a lot of code that is of little use outside the
context of the executable,
and often it's simpler to just keep it all in the one place.
For instance, the go tool is more than 12000 lines spread across <a href="https://golang.org/src/cmd/go/" target="_blank" rel="noopener">34 files</a>.</p>


    
      
  <h4 id="TOC_6.">Document your code</h4>
  <p>Good documentation is an essential quality of usable and maintainable code.
Read the <a href="https://golang.org/doc/articles/godoc_documenting_go_code.html" target="_blank" rel="noopener">Godoc: documenting Go code</a>
article to learn how to write good doc comments.</p>


    
  

  </div>

	
		<h2>Related articles</h2>
		<ul>
		
			<li><a href="/protobuf-apiv2">A new Go API for Protocol Buffers</a></li>
		
			<li><a href="/v2-go-modules">Go Modules: v2 and Beyond</a></li>
		
			<li><a href="/go1.13-errors">Working with Errors in Go 1.13</a></li>
		
			<li><a href="/publishing-go-modules">Publishing Go Modules</a></li>
		
			<li><a href="/module-mirror-launch">Module Mirror and Checksum Database Launched</a></li>
		
			<li><a href="/migrating-to-go-modules">Migrating to Go Modules</a></li>
		
			<li><a href="/debug-opt">Debugging what you deploy in Go 1.12</a></li>
		
			<li><a href="/using-go-modules">Using Go Modules</a></li>
		
			<li><a href="/modules2019">Go Modules in 2019</a></li>
		
			<li><a href="/versioning-proposal">A Proposal for Package Versioning in Go</a></li>
		
			<li><a href="/h2push">HTTP/2 Server Push</a></li>
		
			<li><a href="/http-tracing">Introducing HTTP Tracing</a></li>
		
			<li><a href="/examples">Testable Examples in Go</a></li>
		
			<li><a href="/generate">Generating code</a></li>
		
			<li><a href="/cover">The cover story</a></li>
		
			<li><a href="/race-detector">Introducing the Go Race Detector</a></li>
		
			<li><a href="/maps">Go maps in action</a></li>
		
			<li><a href="/gofmt">go fmt your code</a></li>
		
			<li><a href="/appengine-gopath">The App Engine SDK and workspaces (GOPATH)</a></li>
		
			<li><a href="/debug-gdb">Debugging Go programs with the GNU Debugger</a></li>
		
			<li><a href="/image-draw">The Go image/draw package</a></li>
		
			<li><a href="/image">The Go image package</a></li>
		
			<li><a href="/laws-of-reflection">The Laws of Reflection</a></li>
		
			<li><a href="/error-handling-and-go">Error handling and Go</a></li>
		
			<li><a href="/functions-codewalk">First Class Functions in Go</a></li>
		
			<li><a href="/pprof">Profiling Go Programs</a></li>
		
			<li><a href="/external-libraries">Spotlight on external Go libraries</a></li>
		
			<li><a href="/gif-decoder">A GIF decoder: an exercise in Go interfaces</a></li>
		
			<li><a href="/introducing-gofix">Introducing Gofix</a></li>
		
			<li><a href="/godoc">Godoc: documenting Go code</a></li>
		
			<li><a href="/gob">Gobs of data</a></li>
		
			<li><a href="/cgo">C? Go? Cgo!</a></li>
		
			<li><a href="/json">JSON and Go</a></li>
		
			<li><a href="/slices-intro">Go Slices: usage and internals</a></li>
		
			<li><a href="/concurrency-timeouts">Go Concurrency Patterns: Timing out, moving on</a></li>
		
			<li><a href="/defer-panic-and-recover">Defer, Panic, and Recover</a></li>
		
			<li><a href="/codelab-share">Share Memory By Communicating</a></li>
		
			<li><a href="/json-rpc">JSON-RPC: a tale of interfaces</a></li>
		
		</ul>
	

      </div>

    </div>
  </main>

  <footer>
    <div class="Footer">
      <img class="Footer-gopher" src="/lib/godoc/images/footer-gopher.jpg" alt="The Go Gopher">
      <ul class="Footer-links">
        <li class="Footer-link"><a href="https://golang.org/doc/copyright.html">Copyright</a></li>
        <li class="Footer-link"><a href="https://golang.org/doc/tos.html">Terms of Service</a></li>
        <li class="Footer-link"><a href="http://www.google.com/intl/en/policies/privacy/">Privacy Policy</a></li>
        <li class="Footer-link"><a href="http://golang.org/issues/new?title=x/blog:" target="_blank" rel="noopener">Report issue</a></li>
      </ul>
      <a class="Footer-supportedBy" href="https://google.com">Supported by Google</a>
    </div>
  </footer>

  <script src="/lib/godoc/jquery.js"></script>
  <script src="/lib/godoc/playground.js"></script>
  <script src="/lib/godoc/play.js"></script>
  <script src="/lib/godoc/godocs.js"></script>
  <script>
  $(function() {
    
    $('.playground > pre.numbers, .code > pre.numbers').each(function() {
      var $spans = $(this).find('> span');

      
      var max = 0;
      $spans.each(function() {
        var n = $(this).attr('num')*1;
        if (n > max) max = n;
      });
      var width = 2;
      while (max > 10) {
        max = max / 10;
        width++;
      }

      
      $spans.each(function() {
        var n = $(this).attr('num')+' ';
        while (n.length < width) n = ' '+n;
        $('<span class="number">').text(n).insertBefore(this);
      });
    });

    initPlayground(new HTTPTransport());
  });
  </script>
